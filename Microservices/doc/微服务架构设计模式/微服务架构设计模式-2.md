# 第三章 微服务架构中的进程间的通信

## 微服务架构中的进程间通信概述

### 交互方式

有多种客户端和服务的交互方式。

**一对一**：每个客户端请求由一个服务实例来处理。

**一对多**：每个客户端请求由多个服务实例来处理。

交互方式的第二个维度关注的是同步和异步。

**同步模式**：客户端请求需要服务端实时响应，客户端等待响应式可能导致堵塞。

**异步模式**：客户端请求不会阻塞进程，服务端的响应可是非实时的。

|          |           一对一           |           一对多            |
| :------: | :------------------------: | :-------------------------: |
| 同步模式 |         请求/响应          |             无              |
| 异步模式 | 异步请求/响应<br/>单向通知 | 发布/订阅<br/>发布/异步响应 |

### 定义 API

使用某种借口定义语言（IDL）

### API 演化

**语义化的版本控制**

看这个 http://semver.org

要求版本号由三部分组成：

MAJOR.MINOR.PATCH

- MAJOR：当你对 API 进行不兼容的更改时。
- MINOR：当你对 API 进行向后兼容的增强时。
- PATCH：当你进行向后兼容的错误修复时。

不就是开发的 1.0.0 SNAPSHOT -> 1.0.0 REALEASE

可以在 REST 的 URL 中加上 MAJOR 版本号。这个在对接的时候，用过。/test/v1 -> /test/v2